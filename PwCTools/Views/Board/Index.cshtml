@{
    ViewBag.Title = "Pwc Taskboard";
}

<div style="width:113%; margin: 0 auto 0 auto;">

    <div class="row" ng-controller="boardCtrl">

        <div ng-include="'/AppScripts/busyModal.html'" ng-show="isLoading"></div>

        <h1>PwC Taskboard</h1>

        <div class="panel panel-default">
            <div class="panel panel-primary kanban-col" id="{{col.Id}}" kanban-board-drop="over" ng-repeat="col in columns">
                <div class="panel-heading" style="margin-bottom: 10px;">
                    <h3 class="panel-title">{{col.Name}}</h3>
                </div>
                <div class="panel-body">
                    <div class="kanban-centered">
                        <article class="kanban-entry grab" draggable="true" kanban-board-dragg="task"
                                 ng-repeat="task in col.Tasks" style="margin-bottom: 10px;">
                            <div class="kanban-entry-inner">
                                <div class="kanban-label">
                                    <h5><strong>{{task.Name}}</strong><a href="#" class="btn btn-default btn-sm" role="button"><span class="fa fa-user"></span></a></h5>
                                    <p>{{task.Description}}</p>
                                    <p>
                                        <a href="#" class="btn btn-default btn-xs" role="button"><span class="fa fa-comment"></span></a>&nbsp;
                                        <button type="button" class="btn btn-default btn-xs" data-toggle="modal" data-target="#editModal" data-id="{{task.Id}}" data-name="{{task.Name}}" data-description="{{task.Description}}"><i class="fa fa-pencil"></i></button>
                                    </p>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </div>

        @* modal window *@
        <div class="modal fade" id="editModal" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Edit Task</h4>
                    </div>
                    <div class="modal-body">
                        <form>
                            <input type="hidden" id="task-id" data-ng-model="task.Id" />
                            <div class="form-group">
                                <label for="task-name" class="control-label">Task Name:</label>
                                <input type="text" class="form-control" id="task-name" data-ng-model="task.Name" required>
                            </div>
                            <div class="form-group">
                                <label for="description-text" class="control-label">Description:</label>
                                <textarea class="form-control" id="task-description" data-ng-model="task.Description" required></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" data-ng-click="save()">Save changes</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    </div>
</div>
